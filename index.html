<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Track Performance</title>

<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
:root{
  --bg:#0b0b0f;
  --card:#14141a;
  --accent:#00ff88;
  --text:#f5f5f7;
  --muted:#9ca3af;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto;
  background:var(--bg);
  color:var(--text);
}

/* APP LAYOUT */

.app{
  padding-bottom:80px;
}

/* HEADER */

.header{
  font-size:26px;
  font-weight:700;
  padding:20px;
}

/* GLASS CARD */

.card{
  background:linear-gradient(145deg,#15151c,#0e0e13);
  margin:15px;
  padding:18px;
  border-radius:18px;
  box-shadow:0 10px 30px rgba(0,0,0,.6);
}

/* PLAYER GRID */

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
  gap:15px;
  padding:15px;
}

.player{
  background:var(--card);
  border-radius:18px;
  padding:25px 10px;
  text-align:center;
  font-weight:600;
  cursor:pointer;
  transition:.2s;
}

.player:hover{transform:scale(1.05);}

.add{
  border:2px dashed #333;
  font-size:28px;
}

/* BUTTONS */

button{
  border:none;
  border-radius:14px;
  padding:10px 16px;
  font-weight:600;
  cursor:pointer;
}

.primary{background:var(--accent);color:black;}
.secondary{background:#2a2a2a;}

/* TABLE */

table{
  width:100%;
  border-collapse:collapse;
}

th,td{
  padding:10px;
  text-align:center;
}

th{color:var(--muted);}

input{
  width:100%;
  background:transparent;
  border:none;
  color:white;
  text-align:center;
}

/* PR highlight */

.pr{
  background:var(--accent);
  color:black;
  border-radius:6px;
  font-weight:700;
}

/* BOTTOM NAV */

.nav{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  height:70px;
  background:#111;
  display:flex;
  justify-content:space-around;
  align-items:center;
  font-size:14px;
}

.nav div{
  text-align:center;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="app">

<div class="header">Performance</div>

<div id="home"></div>
<div id="profile" style="display:none"></div>
<div id="stats" style="display:none"></div>

</div>

<div class="nav">
  <div onclick="showHome()">üè†<br>Players</div>
  <div onclick="showStats()">üìä<br>Stats</div>
  <div onclick="alert('Future profile settings')">‚öôÔ∏è<br>Settings</div>
</div>

<script>
let db = JSON.parse(localStorage.getItem("appTrack")) || {};
let current=null;

function save(){localStorage.setItem("appTrack",JSON.stringify(db));}

/* HOME */

function showHome(){
  hideAll();
  home.style.display="block";

  let html='<div class="grid">';

  Object.keys(db).forEach(n=>{
    html+=`<div class="player" onclick="openPlayer('${n}')">${n}</div>`;
  });

  html+=`<div class="player add" onclick="newPlayer()">Ôºã</div></div>`;
  home.innerHTML=html;
}

function newPlayer(){
  const n=prompt("Name?");
  if(!n) return;
  db[n]=[];
  save();
  showHome();
}

/* PROFILE */

function openPlayer(n){
  current=n;
  hideAll();
  profile.style.display="block";

  let html=`
    <div class="card">
      <h2>${n}</h2>
      <button class="primary" onclick="addRow()">Add Result</button>
      <button class="secondary" onclick="saveProfile()">Save</button>
    </div>

    <div class="card">
      <table id="tbl">
        <tr>
          <th>Meet</th>
          <th>100</th><th>200</th><th>400</th>
          <th>800</th><th>1600</th>
          <th>LJ</th><th>HJ</th><th>TJ</th>
        </tr>
      </table>
    </div>

    <div class="card" id="bests"></div>
  `;

  profile.innerHTML=html;

  db[n].forEach(addRow);
  updatePR();
}

function addRow(data={}){
  const r=tbl.insertRow();

  const f=["meet","100","200","400","800","1600","lj","hj","tj"];

  f.forEach(x=>{
    const c=r.insertCell();
    c.innerHTML=`<input value="${data[x]||""}" oninput="updatePR()">`;
  });
}

function saveProfile(){
  const rows=document.querySelectorAll("#tbl tr");
  const data=[];

  rows.forEach((r,i)=>{
    if(i===0) return;
    const x=r.querySelectorAll("input");
    data.push({
      meet:x[0].value,
      100:x[1].value,
      200:x[2].value,
      400:x[3].value,
      800:x[4].value,
      1600:x[5].value,
      lj:x[6].value,
      hj:x[7].value,
      tj:x[8].value
    });
  });

  db[current]=data;
  save();
}

/* PR + BESTS */

function updatePR(){
  const rows=document.querySelectorAll("#tbl tr");
  const best={1:Infinity,2:Infinity,3:Infinity,4:Infinity,5:Infinity,6:0,7:0,8:0};

  rows.forEach((r,i)=>{
    if(i===0) return;
    const x=r.querySelectorAll("input");

    for(let c=1;c<=5;c++){
      const v=parseFloat(x[c].value);
      if(!isNaN(v)&&v<best[c]) best[c]=v;
    }

    for(let c=6;c<=8;c++){
      const v=parseFloat(x[c].value);
      if(!isNaN(v)&&v>best[c]) best[c]=v;
    }
  });

  rows.forEach((r,i)=>{
    if(i===0) return;
    const x=r.querySelectorAll("input");

    for(let c=1;c<=8;c++){
      x[c].classList.remove("pr");
      const v=parseFloat(x[c].value);
      if(isNaN(v)) continue;

      if((c<=5 && v===best[c]) || (c>=6 && v===best[c]))
        x[c].classList.add("pr");
    }
  });

  bests.innerHTML = `
    <h3>Personal Bests</h3>
    100 ${best[1]||"-"} | 200 ${best[2]||"-"} | 400 ${best[3]||"-"}<br>
    800 ${best[4]||"-"} | 1600 ${best[5]||"-"}<br>
    LJ ${best[6]||"-"} | HJ ${best[7]||"-"} | TJ ${best[8]||"-"}
  `;
}

/* STATS SCREEN */

function showStats(){
  hideAll();
  stats.style.display="block";
  stats.innerHTML=`<div class="card"><h2>Stats coming soon</h2></div>`;
}

function hideAll(){
  home.style.display="none";
  profile.style.display="none";
  stats.style.display="none";
}

showHome();
</script>

</body>
</html>
