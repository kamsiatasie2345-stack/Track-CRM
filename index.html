<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TrackPro Elite</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:#000;
  color:#fff;
  overflow:hidden;
}

/* HEADER */
.header{
  padding:18px;
  text-align:center;
  font-size:24px;
  font-weight:700;
  background:#111;
}

/* NAV BAR */
.nav{
  display:flex;
  justify-content:space-around;
  background:#0d0d0d;
  padding:10px 0;
}

.nav button{
  background:none;
  border:none;
  color:white;
  font-weight:600;
  font-size:14px;
  cursor:pointer;
}

/* PAGE SYSTEM */
.page{
  position:absolute;
  top:110px;
  width:100%;
  height:calc(100% - 110px);
  padding:20px;
  overflow-y:auto;
  opacity:0;
  transform:translateX(40px);
  transition:.45s ease;
  pointer-events:none;
}

.page.active{
  opacity:1;
  transform:translateX(0);
  pointer-events:auto;
}

/* PROFILE GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
  gap:18px;
}

.profile{
  position:relative;
  background:#111;
  border-radius:18px;
  height:140px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  cursor:pointer;
  box-shadow:0 0 15px rgba(255,255,255,.08);
  transition:.2s;
}

.profile:hover{transform:scale(1.05);}

/* DELETE BUTTON */
.deleteBtn{
  position:absolute;
  top:6px;
  right:8px;
  background:#fff;
  color:#000;
  border:none;
  border-radius:50%;
  width:22px;
  height:22px;
  font-weight:bold;
  cursor:pointer;
  font-size:14px;
}

/* ADD BOX */
.addBox{
  font-size:42px;
  color:#fff;
}

/* CARDS */
.card{
  background:#111;
  padding:18px;
  border-radius:18px;
  margin-bottom:18px;
}

/* INPUTS */
input,select,textarea{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:10px;
  border:none;
  background:#000;
  color:white;
}

/* PRIMARY BUTTON */
button.primary{
  background:#fff;
  color:#000;
  border:none;
  padding:10px 16px;
  border-radius:12px;
  font-weight:700;
  cursor:pointer;
}

.backBtn{
  margin-bottom:10px;
  background:none;
  border:none;
  color:#fff;
  font-weight:600;
  cursor:pointer;
}

.pr{
  color:#4ade80;
  font-weight:bold;
  font-size:18px;
}
</style>
</head>

<body>

<div class="header">
  <img 
    src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAYAAADb...REPLACE_WITH_FULL_BASE64_STRING..."
    class="logo"
  >
  TrackPro Elite
</div>

<div class="nav" id="nav" style="display:none;">
  <button onclick="switchTab('stats')">Stats</button>
  <button onclick="switchTab('goals')">Goals</button>
  <button onclick="switchTab('workout')">Workout</button>
  <button onclick="switchTab('tools')">Tools</button>
</div>

<!-- PROFILES -->
<div id="profiles" class="page active">
  <div class="card" id="nameCard" style="display:none;">
    <h3>Create Profile</h3>
    <input id="nameInput" placeholder="Athlete name">
    <button class="primary" onclick="confirmAdd()">Create</button>
  </div>

  <div class="grid" id="profileGrid"></div>
</div>

<!-- STATS -->
<div id="stats" class="page">
  <button class="backBtn" onclick="goHome()">‚¨Ö Profiles</button>

  <div class="card">
    <h2 id="athleteName"></h2>

    <select id="eventSelect" onchange="showEventChart()">
      <option>100m</option>
      <option>200m</option>
      <option>400m</option>
      <option>800m</option>
      <option>1600m</option>
      <option>Long Jump</option>
      <option>High Jump</option>
      <option>Triple Jump</option>
    </select>

    <input id="resultInput" placeholder="Time or Distance">
    <button class="primary" onclick="addResult()">Add Result</button>

    <div id="prNotice"></div>
    <canvas id="chartCanvas"></canvas>
  </div>
</div>

<!-- GOALS -->
<div id="goals" class="page">
  <button class="backBtn" onclick="goHome()">‚¨Ö Profiles</button>

  <div class="card">
    <h2>üéØ Goals</h2>
    <input id="goalInput" placeholder="Goal">
    <button class="primary" onclick="addGoal()">Add</button>
    <div id="goalList"></div>
  </div>
</div>

<!-- WORKOUT -->
<div id="workout" class="page">
  <button class="backBtn" onclick="goHome()">‚¨Ö Profiles</button>

  <div class="card">
    <h2>üèÉ Workout Planner</h2>
    <textarea id="workoutText" rows="6"></textarea>
    <button class="primary" onclick="saveWorkout()">Save Workout</button>
  </div>
</div>

<!-- TOOLS -->
<div id="tools" class="page">
  <button class="backBtn" onclick="goHome()">‚¨Ö Profiles</button>

  <div class="card">
    <h3>üèÅ Race Prediction AI</h3>
    <input id="predictInput" placeholder="Recent time">
    <button class="primary" onclick="predict()">Predict</button>
    <div id="predictionResult"></div>
  </div>

  <div class="card">
    <h3>‚è± Split Calculator</h3>
    <input id="totalTime" placeholder="Total time">
    <input id="distance" placeholder="Total distance">
    <input id="segment" placeholder="Segment distance">
    <button class="primary" onclick="calculateSplit()">Calculate</button>
    <div id="splitResult"></div>
  </div>
</div>

<script>
let data = JSON.parse(localStorage.getItem("trackProElite")) || {athletes:[]};
let current=null;
let chart;

function save(){
  localStorage.setItem("trackProElite",JSON.stringify(data));
}

/* PROFILES */

function renderProfiles(){
  profileGrid.innerHTML="";

  data.athletes.forEach((a,i)=>{
    profileGrid.innerHTML+=`
      <div class="profile" onclick="openAthlete(${i})">
        <button class="deleteBtn" onclick="deleteAthlete(event,${i})">√ó</button>
        <div style="font-size:32px">üèÉ</div>
        <div>${a.name}</div>
      </div>`;
  });

  profileGrid.innerHTML+=`
    <div class="profile" onclick="showAddBox()">
      <div class="addBox">+</div>
    </div>`;
}

function showAddBox(){
  nameCard.style.display="block";
}

function confirmAdd(){
  const name=nameInput.value.trim();
  if(!name) return;

  data.athletes.push({name,results:{},goals:[],workout:""});
  nameInput.value="";
  nameCard.style.display="none";
  save();
  renderProfiles();
}

function deleteAthlete(e,i){
  e.stopPropagation();
  data.athletes.splice(i,1);
  save();
  renderProfiles();
}

function openAthlete(i){
  current=i;
  athleteName.innerText=data.athletes[i].name;
  nav.style.display="flex";
  switchTab("stats");
}

function goHome(){
  nav.style.display="none";
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  profiles.classList.add("active");
}

/* TAB SWITCH */

function switchTab(tab){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(tab).classList.add("active");

  if(tab==="stats") showEventChart();
  if(tab==="goals") renderGoals();
  if(tab==="workout") workoutText.value=data.athletes[current].workout;
}

/* RESULTS + PR */

function addResult(){
  const e=eventSelect.value;
  const val=parseFloat(resultInput.value);
  const a=data.athletes[current];

  if(!a.results[e]) a.results[e]=[];

  const best=Math.min(...a.results[e],Infinity);
  a.results[e].push(val);
  save();

  prNotice.innerHTML = val < best ? "üî• NEW PR!" : "";
  prNotice.className = val < best ? "pr" : "";

  showEventChart();
}

/* EVENT CHART */

function showEventChart(){
  const a=data.athletes[current];
  const e=eventSelect.value;
  const arr=a.results[e] || [];

  if(chart) chart.destroy();

  chart=new Chart(chartCanvas,{
    type:"line",
    data:{
      labels:arr.map((_,i)=>i+1),
      datasets:[{
        data:arr,
        borderColor:"#fff",
        tension:.35
      }]
    },
    options:{
      plugins:{legend:{display:false}},
      animation:{duration:900}
    }
  });
}

/* GOALS */

function addGoal(){
  data.athletes[current].goals.push(goalInput.value);
  save();
  renderGoals();
}

function renderGoals(){
  const g=data.athletes[current].goals;
  goalList.innerHTML=g.map(x=>`<div>${x}</div>`).join("");
}

/* WORKOUT */

function saveWorkout(){
  data.athletes[current].workout=workoutText.value;
  save();
}

/* TOOLS */

function predict(){
  const t=parseFloat(predictInput.value);
  predictionResult.innerText="Predicted PR: "+(t*0.97).toFixed(2);
}

function calculateSplit(){
  const T=+totalTime.value;
  const D=+distance.value;
  const S=+segment.value;
  splitResult.innerText="Split: "+(T/D*S).toFixed(2);
}

renderProfiles();
</script>

</body>
</html>
